<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>π“ Lecture Shorts Factory v2.0</title>
    <link rel="manifest" href="./manifest.json">
    <link rel="apple-touch-icon" href="./icons/icon-192x192.png">
    <meta name="theme-color" content="#1a1a2e">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>π“ Lecture Shorts Factory</h1>
            <p class="subtitle">4λ¶„ κ°•μ β†’ 3λ¶„ μ‡ΌμΈ  μλ™ λ³€ν™</p>
            <div class="version-row">
                <span class="version">v2.0.0</span>
                <span id="engineInfo" class="engine-badge">κ²€μ‚¬ μ¤‘...</span>
            </div>
        </header>

        <!-- Memory Warning -->
        <div id="memWarn" class="memory-warning" style="display:none;">
            β οΈ λ©”λ¨λ¦¬ λ¶€μ΅± κ²½κ³ : 4GB μ΄μƒ κ¶μ¥
        </div>

        <!-- Browser Warning -->
        <div id="browserWarn" class="browser-warning" style="display:none;">
            β οΈ Chrome/Edge κ¶μ¥ (WebCodecs ν•λ“μ›¨μ–΄ κ°€μ†)
        </div>

        <main>
            <!-- Step 1: Lecture Video -->
            <section class="step-card" id="step1">
                <div class="step-header">
                    <span class="step-num">1</span>
                    <span class="step-title">κ°•μ μμƒ (4λ¶„ λ‚΄μ™Έ)</span>
                </div>
                <div class="step-content">
                    <input type="file" id="vidIn" accept="video/*" hidden>
                    <button class="upload-btn" onclick="document.getElementById('vidIn').click()">
                        π“Ή μμƒ μ„ νƒ
                    </button>
                    <div id="vidInfo" class="file-info"></div>
                </div>
            </section>

            <!-- Step 2: Intro Video -->
            <section class="step-card" id="step2">
                <div class="step-header">
                    <span class="step-num">2</span>
                    <span class="step-title">μΈνΈλ΅ μμƒ (15μ΄~2λ¶„)</span>
                </div>
                <div class="step-content">
                    <input type="file" id="introIn" accept="video/*" hidden>
                    <button class="upload-btn" onclick="document.getElementById('introIn').click()">
                        π¬ μΈνΈλ΅ μ„ νƒ
                    </button>
                    <div id="introInfo" class="file-info"></div>
                </div>
            </section>

            <!-- Step 3: Background Music -->
            <section class="step-card" id="step3">
                <div class="step-header">
                    <span class="step-num">3</span>
                    <span class="step-title">λ°°κ²½μμ•… (μ„ νƒ)</span>
                </div>
                <div class="step-content">
                    <input type="file" id="bgmIn" accept="audio/*" hidden>
                    <button class="upload-btn secondary" onclick="document.getElementById('bgmIn').click()">
                        πµ μμ•… μ„ νƒ (μ„ νƒμ‚¬ν•­)
                    </button>
                    <div id="bgmInfo" class="file-info"></div>
                </div>
            </section>

            <!-- Step 4: Device Preset -->
            <section class="step-card" id="step4">
                <div class="step-header">
                    <span class="step-num">4</span>
                    <span class="step-title">λ””λ°”μ΄μ¤ ν”„λ¦¬μ…‹</span>
                </div>
                <div class="step-content">
                    <p class="preset-desc">UI λ°” μ κ±°λ¥Ό μ„ν• ν¬λ΅­ μ„¤μ •</p>
                    <div class="preset-btns">
                        <button class="preset-btn" id="btnTabS9" onclick="setPreset('TAB_S9')">
                            π“± Galaxy Tab S9
                        </button>
                        <button class="preset-btn" id="btnS25" onclick="setPreset('S25_ULTRA')">
                            π“± Galaxy S25 Ultra
                        </button>
                        <button class="preset-btn active" id="btnNone" onclick="setPreset(null)">
                            β ν¬λ΅­ μ—†μ
                        </button>
                    </div>
                    <div id="presetInfo" class="preset-info"></div>
                </div>
            </section>

            <!-- Step 5: Generate -->
            <section class="step-card generate-card" id="step5">
                <button class="generate-btn" id="genBtn" onclick="generate()" disabled>
                    π€ 3λ¶„ μ‡ΌμΈ  μƒμ„±
                </button>
                <div id="status" class="status"></div>
                <div id="progress" class="progress-bar" style="display:none;">
                    <div class="progress-fill" id="progFill"></div>
                    <span class="progress-text" id="progText">0%</span>
                </div>
            </section>

            <!-- Result -->
            <section class="step-card result-card" id="result" style="display:none;">
                <h3>β… λ³€ν™ μ™„λ£!</h3>
                <video id="preview" controls playsinline></video>
                <div class="result-btns">
                    <a id="dlLink" class="download-btn" download="lecture_shorts.mp4">
                        π“¥ λ‹¤μ΄λ΅λ“
                    </a>
                    <button class="reset-btn" onclick="reset()">
                        π”„ μƒλ΅ λ§λ“¤κΈ°
                    </button>
                </div>
            </section>
        </main>

        <footer>
            <p>DTS Cloud AppStore | WebCodecs + mp4-muxer</p>
        </footer>
    </div>

    <script src="https://unpkg.com/@ffmpeg/ffmpeg@0.11.6/dist/ffmpeg.min.js"></script>
    <script src="./app.js"></script>
</body>
</html>
