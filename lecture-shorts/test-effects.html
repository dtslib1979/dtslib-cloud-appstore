<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íŠ¸ëœì§€ì…˜ íš¨ê³¼ í…ŒìŠ¤íŠ¸</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: #1a1a2e;
            color: #fff;
            font-family: -apple-system, sans-serif;
            padding: 20px;
        }
        h1 { text-align: center; margin-bottom: 20px; color: #e94560; }
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        .test-card {
            background: #16213e;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
        }
        .test-card h3 { margin-bottom: 10px; color: #e94560; }
        canvas {
            border: 2px solid #e94560;
            border-radius: 8px;
            width: 100%;
            aspect-ratio: 9/16;
        }
        .controls {
            margin-top: 10px;
        }
        button {
            background: #e94560;
            color: #fff;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #ff6b6b; }
        .progress-label {
            margin-top: 8px;
            font-size: 14px;
            color: #aaa;
        }
        #log {
            max-width: 1200px;
            margin: 20px auto;
            background: #0f0f1a;
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <h1>ğŸ¬ íŠ¸ëœì§€ì…˜ íš¨ê³¼ í…ŒìŠ¤íŠ¸ v6.0</h1>

    <div class="test-grid">
        <div class="test-card">
            <h3>ğŸ“º TV Effect</h3>
            <canvas id="canvas-tv" width="270" height="480"></canvas>
            <div class="controls">
                <button onclick="animate('tv')">â–¶ï¸ ì¬ìƒ</button>
                <button onclick="reset('tv')">ğŸ”„ ë¦¬ì…‹</button>
            </div>
            <div class="progress-label" id="progress-tv">progress: 1.00</div>
        </div>

        <div class="test-card">
            <h3>ğŸ“¼ VHS Effect</h3>
            <canvas id="canvas-vhs" width="270" height="480"></canvas>
            <div class="controls">
                <button onclick="animate('vhs')">â–¶ï¸ ì¬ìƒ</button>
                <button onclick="reset('vhs')">ğŸ”„ ë¦¬ì…‹</button>
            </div>
            <div class="progress-label" id="progress-vhs">progress: 1.00</div>
        </div>

        <div class="test-card">
            <h3>ğŸ¯ FOCUS Effect</h3>
            <canvas id="canvas-focus" width="270" height="480"></canvas>
            <div class="controls">
                <button onclick="animate('focus')">â–¶ï¸ ì¬ìƒ</button>
                <button onclick="reset('focus')">ğŸ”„ ë¦¬ì…‹</button>
            </div>
            <div class="progress-label" id="progress-focus">progress: 1.00</div>
        </div>

        <div class="test-card">
            <h3>ğŸ“³ TREMBLE Effect</h3>
            <canvas id="canvas-tremble" width="270" height="480"></canvas>
            <div class="controls">
                <button onclick="animate('tremble')">â–¶ï¸ ì¬ìƒ</button>
                <button onclick="reset('tremble')">ğŸ”„ ë¦¬ì…‹</button>
            </div>
            <div class="progress-label" id="progress-tremble">progress: 1.00</div>
        </div>

        <div class="test-card">
            <h3>ğŸ” ZOOM Effect</h3>
            <canvas id="canvas-zoom" width="270" height="480"></canvas>
            <div class="controls">
                <button onclick="animate('zoom')">â–¶ï¸ ì¬ìƒ</button>
                <button onclick="reset('zoom')">ğŸ”„ ë¦¬ì…‹</button>
            </div>
            <div class="progress-label" id="progress-zoom">progress: 1.00</div>
        </div>
    </div>

    <div style="text-align: center; margin: 20px;">
        <button onclick="animateAll()">ğŸ¬ ì „ì²´ ì¬ìƒ</button>
        <button onclick="resetAll()">ğŸ”„ ì „ì²´ ë¦¬ì…‹</button>
    </div>

    <div id="log"></div>

    <script>
        // í…ŒìŠ¤íŠ¸ ì´ë¯¸ì§€ ê·¸ë¦¬ê¸° (ìƒ˜í”Œ ì˜ìƒ ëŒ€ì‹ )
        function drawTestImage(ctx, width, height) {
            // ê·¸ë¼ë°ì´ì…˜ ë°°ê²½
            const gradient = ctx.createLinearGradient(0, 0, 0, height);
            gradient.addColorStop(0, '#667eea');
            gradient.addColorStop(1, '#764ba2');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, width, height);

            // í…ìŠ¤íŠ¸
            ctx.fillStyle = '#fff';
            ctx.font = 'bold 24px sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText('LECTURE', width / 2, height / 2 - 20);
            ctx.fillText('SHORTS', width / 2, height / 2 + 20);

            // ì¥ì‹ ì›
            ctx.beginPath();
            ctx.arc(width / 2, height / 4, 30, 0, Math.PI * 2);
            ctx.fillStyle = 'rgba(255,255,255,0.3)';
            ctx.fill();
        }

        // íš¨ê³¼ í•¨ìˆ˜ë“¤ (app.jsì—ì„œ ë³µì‚¬)
        function applyTVEffect(ctx, progress, width, height) {
            const barSize = Math.floor((height / 2) * (1 - progress));
            if (barSize > 0) {
                ctx.fillStyle = '#000000';
                ctx.fillRect(0, 0, width, barSize);
                ctx.fillRect(0, height - barSize, width, barSize);
                ctx.fillStyle = `rgba(0, 0, 0, ${0.4 * (1 - progress)})`;
                for (let y = 0; y < height; y += 2) {
                    ctx.fillRect(0, y, width, 1);
                }
            }
            if (progress < 0.15) {
                ctx.fillStyle = '#ffffff';
                ctx.fillRect(0, height / 2 - 3, width, 6);
            }
        }

        function applyVHSEffect(ctx, progress, width, height) {
            const intensity = 1 - progress;
            ctx.fillStyle = `rgba(255, 255, 255, ${0.15 * intensity})`;
            for (let i = 0; i < 50 * intensity; i++) {
                const x = Math.random() * width;
                const y = Math.random() * height;
                ctx.fillRect(x, y, Math.random() * 3, 1);
            }
            ctx.fillStyle = `rgba(0, 255, 255, ${0.3 * intensity})`;
            for (let i = 0; i < 5 * intensity; i++) {
                const y = Math.random() * height;
                ctx.fillRect(0, y, width, 2);
            }
            const trackY = ((1 - progress) * 1.5 * height) % height;
            ctx.fillStyle = `rgba(255, 255, 255, ${0.5 * intensity})`;
            ctx.fillRect(0, trackY, width, 8);
            ctx.fillRect(0, trackY + 15, width, 3);
            if (intensity > 0.3) {
                ctx.globalCompositeOperation = 'screen';
                ctx.fillStyle = `rgba(255, 0, 0, ${0.1 * intensity})`;
                ctx.fillRect(3 * intensity, 0, width, height);
                ctx.fillStyle = `rgba(0, 0, 255, ${0.1 * intensity})`;
                ctx.fillRect(-3 * intensity, 0, width, height);
                ctx.globalCompositeOperation = 'source-over';
            }
        }

        function applyFocusEffect(ctx, progress, width, height) {
            const intensity = 1 - progress;
            const gradient = ctx.createRadialGradient(
                width / 2, height / 2, 0,
                width / 2, height / 2, Math.max(width, height) * 0.6
            );
            gradient.addColorStop(0, 'rgba(0,0,0,0)');
            gradient.addColorStop(0.5, `rgba(0,0,0,${0.3 * intensity})`);
            gradient.addColorStop(1, `rgba(0,0,0,${0.9 * intensity})`);
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, width, height);
            ctx.fillStyle = `rgba(0, 0, 0, ${0.7 * intensity})`;
            ctx.fillRect(0, 0, width, height);
        }

        function applyTrembleEffect(ctx, progress, width, height) {
            const intensity = 1 - progress;
            if (Math.random() < intensity * 0.5) {
                ctx.fillStyle = `rgba(255, 255, 255, ${0.3 * intensity})`;
                ctx.fillRect(0, 0, width, height);
            }
            if (Math.random() < intensity * 0.3) {
                ctx.fillStyle = `rgba(0, 0, 0, ${0.5 * intensity})`;
                ctx.fillRect(0, 0, width, height);
            }
            ctx.fillStyle = `rgba(255, 255, 255, ${0.4 * intensity})`;
            for (let i = 0; i < 10 * intensity; i++) {
                const y = Math.random() * height;
                const h = Math.random() * 5 + 1;
                ctx.fillRect(0, y, width, h);
            }
            ctx.fillStyle = `rgba(0, 0, 0, ${0.5 * intensity})`;
            ctx.fillRect(0, 0, width, height);
        }

        function applyZoomEffect(ctx, progress, width, height) {
            const intensity = 1 - progress;
            const gradient = ctx.createRadialGradient(
                width / 2, height / 2, 0,
                width / 2, height / 2, Math.max(width, height) * (0.8 - intensity * 0.5)
            );
            gradient.addColorStop(0, 'rgba(0,0,0,0)');
            gradient.addColorStop(0.7, `rgba(0,0,0,${0.5 * intensity})`);
            gradient.addColorStop(1, `rgba(0,0,0,${1 * intensity})`);
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, width, height);
            ctx.fillStyle = `rgba(0, 0, 0, ${0.6 * intensity})`;
            ctx.fillRect(0, 0, width, height);
        }

        const effects = { tv: applyTVEffect, vhs: applyVHSEffect, focus: applyFocusEffect, tremble: applyTrembleEffect, zoom: applyZoomEffect };
        const animations = {};

        function log(msg) {
            const logEl = document.getElementById('log');
            const time = new Date().toLocaleTimeString();
            logEl.innerHTML = `[${time}] ${msg}<br>` + logEl.innerHTML;
        }

        function reset(effect) {
            if (animations[effect]) {
                cancelAnimationFrame(animations[effect]);
                delete animations[effect];
            }
            const canvas = document.getElementById(`canvas-${effect}`);
            const ctx = canvas.getContext('2d');
            drawTestImage(ctx, canvas.width, canvas.height);
            document.getElementById(`progress-${effect}`).textContent = 'progress: 1.00';
            log(`ğŸ”„ ${effect.toUpperCase()} ë¦¬ì…‹`);
        }

        function animate(effect) {
            if (animations[effect]) {
                cancelAnimationFrame(animations[effect]);
            }

            const canvas = document.getElementById(`canvas-${effect}`);
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            const duration = 1000; // 1ì´ˆ
            const startTime = performance.now();

            log(`â–¶ï¸ ${effect.toUpperCase()} íš¨ê³¼ ì‹œì‘`);

            function frame(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.max(0, 1 - (elapsed / duration));

                // ë°°ê²½ ê·¸ë¦¬ê¸°
                drawTestImage(ctx, width, height);

                // íš¨ê³¼ ì ìš©
                effects[effect](ctx, progress, width, height);

                // ì§„í–‰ë¥  í‘œì‹œ
                document.getElementById(`progress-${effect}`).textContent = `progress: ${progress.toFixed(2)}`;

                if (progress > 0) {
                    animations[effect] = requestAnimationFrame(frame);
                } else {
                    log(`âœ… ${effect.toUpperCase()} íš¨ê³¼ ì™„ë£Œ`);
                    delete animations[effect];
                }
            }

            animations[effect] = requestAnimationFrame(frame);
        }

        function animateAll() {
            ['tv', 'vhs', 'focus', 'tremble', 'zoom'].forEach((effect, i) => {
                setTimeout(() => animate(effect), i * 200);
            });
        }

        function resetAll() {
            ['tv', 'vhs', 'focus', 'tremble', 'zoom'].forEach(reset);
        }

        // ì´ˆê¸°í™”
        window.onload = function() {
            resetAll();
            log('ğŸ¬ íŠ¸ëœì§€ì…˜ íš¨ê³¼ í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ');
            log('ê° íš¨ê³¼ì˜ [ì¬ìƒ] ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ íš¨ê³¼ë¥¼ í™•ì¸í•˜ì„¸ìš”');
        };
    </script>
</body>
</html>
